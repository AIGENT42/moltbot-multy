# Multi-instance configuration for Moltbot
# Copy this file to instances.yaml and customize
#
# Ports are AUTO-ALLOCATED sequentially starting from defaults.ports
# No need to specify any port numbers!
#
# Usage:
#   ./docker-multi-bulk.sh generate   # Generate from this config
#   ./docker-multi-bulk.sh up         # Start all instances
#   ./docker-multi-bulk.sh down       # Stop all instances
#   ./docker-multi-bulk.sh status     # Show all instance status

# Global defaults
defaults:
  # Base directories - instance name appended automatically
  config_base: /data/moltbot/config
  workspace_base: /data/moltbot/workspace

  # Starting ports (auto-increment from here)
  ports:
    gateway_start: 18789  # First instance gets 18789, second 18790, etc.
    bridge_start: 28789   # First instance gets 28789, second 28790, etc.

  # Default resource limits per container
  resources:
    memory: 512m
    memory_swap: 1g
    cpus: 0.5
    pids_limit: 100

# Instance definitions
# Ports are auto-allocated in order of definition
instances:
  # === SIMPLE: Just specify count ===
  # Creates: instance-1, instance-2, ... instance-1000
  - count: 1000

  # === OR with custom prefix ===
  # Creates: user-1, user-2, ... user-1000
  - prefix: user
    count: 1000

  # === OR use pattern with range ===
  # Creates: bot-001, bot-002, ... bot-500 (with zero-padding)
  - pattern: "bot-{n:03d}"
    range: [1, 500]

  # === OR list specific names ===
  - names:
      - admin
      - support
      - testing

  # === With custom resources ===
  - prefix: premium
    count: 100
    resources:
      memory: 1g
      cpus: 1

  - prefix: basic
    count: 900
    resources:
      memory: 256m
      cpus: 0.25
